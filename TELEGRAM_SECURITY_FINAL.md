# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT –≤ `/api/telegram/notify`

**–ü—Ä–æ–±–ª–µ–º–∞:** API route –ø—Ä–∏–Ω–∏–º–∞–ª –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ª—é–±–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ Authorization header
const authHeader = request.headers.get('authorization');
const token = authHeader.substring(7); // Bearer <token>

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ service_role
const { data: { user }, error: authError } = await admin.auth.getUser(token);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥–º–∏–Ω
const { data: caller } = await admin
  .from('students')
  .select('is_admin, is_super_admin, is_banned')
  .eq('user_id', user.id)
  .single();

if (!caller.is_admin || caller.is_banned) {
  return 403 Forbidden;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

---

### 2. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JWT —Ç–æ–∫–µ–Ω

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/lib/telegram.ts`:**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω –∏–∑ Supabase session
const { data: { session } } = await supabase.auth.getSession();

// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å Authorization header
fetch('/api/telegram/notify', {
  headers: { 
    'Authorization': `Bearer ${session.access_token}`
  }
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç JWT —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è `joined` –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –∫—Ç–æ-—Ç–æ –≤—Å—Ç–∞–ª –≤ –æ—á–µ—Ä–µ–¥—å.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í /api/telegram/notify/route.ts
const adminOnlyNotifications = [
  'washing_started_by_student', 
  'washing_finished', 
  'joined'  // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
];
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ `joined` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º, —Å—Ç—É–¥–µ–Ω—Ç—ã –µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç.

---

## üîê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –£—Ä–æ–≤–µ–Ω—å 1: –ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- ‚úÖ –ù–µ –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å —Ç–æ–∫–µ–Ω (–ø–æ–¥–ø–∏—Å–∞–Ω Supabase)
- ‚úÖ –ù–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `service_role` –∫–ª—é—á—É

### –£—Ä–æ–≤–µ–Ω—å 2: API Route (`/api/telegram/notify`)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `admin.auth.getUser(token)`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –≤ –ë–î (`is_admin`, `is_banned`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `service_role` –¥–ª—è —á—Ç–µ–Ω–∏—è `students.telegram_chat_id` (–æ–±—Ö–æ–¥–∏—Ç RLS)
- ‚úÖ –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∫–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å —Ç–µ–∫—Å—Ç)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram API (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

### –£—Ä–æ–≤–µ–Ω—å 3: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∑–∞—â–∏—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `service_role` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ö–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `anon` –∫–ª—é—á —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

---

## üìã –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∏—Ö –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

### –¢–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç—É (student-only):
- `admin_call_for_key` - –∞–¥–º–∏–Ω –ø–æ–∑–≤–∞–ª –∑–∞ –∫–ª—é—á–æ–º
- `admin_return_key` - –∞–¥–º–∏–Ω –ø—Ä–æ—Å–∏—Ç –≤–µ—Ä–Ω—É—Ç—å –∫–ª—é—á
- `key_issued` - –∫–ª—é—á –≤—ã–¥–∞–Ω

### –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É (admin-only):
- `washing_started_by_student` - —Å—Ç—É–¥–µ–Ω—Ç –Ω–∞—á–∞–ª —Å—Ç–∏—Ä–∞—Ç—å
- `washing_finished` - —Å—Ç—É–¥–µ–Ω—Ç –∑–∞–∫–æ–Ω—á–∏–ª —Å—Ç–∏—Ä–∞—Ç—å
- `joined` - –Ω–æ–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç –≤—Å—Ç–∞–ª –≤ –æ—á–µ—Ä–µ–¥—å

### –û–±–æ–∏–º (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ):
- `washing_started` - –∞–¥–º–∏–Ω –∑–∞–ø—É—Å—Ç–∏–ª —Å—Ç–∏—Ä–∫—É
- `washing_done` - —Å—Ç–∏—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- `left` - —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–∫–∏–Ω—É–ª –æ—á–µ—Ä–µ–¥—å
- `updated` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

### 1. –ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
**–ê—Ç–∞–∫–∞:** –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
**–ó–∞—â–∏—Ç–∞:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `401 Unauthorized` –±–µ–∑ JWT —Ç–æ–∫–µ–Ω–∞.

### 2. –ü–æ–¥–¥–µ–ª–∫–∞ —Ç–æ–∫–µ–Ω–∞
**–ê—Ç–∞–∫–∞:** –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–¥–µ–ª–∞—Ç—å JWT —Ç–æ–∫–µ–Ω.
**–ó–∞—â–∏—Ç–∞:** –¢–æ–∫–µ–Ω –ø–æ–¥–ø–∏—Å–∞–Ω Supabase, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `admin.auth.getUser()`.

### 3. –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
**–ê—Ç–∞–∫–∞:** –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
**–ó–∞—â–∏—Ç–∞:** API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `is_admin` –≤ –ë–î, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `403 Forbidden`.

### 4. –°–ø–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
**–ê—Ç–∞–∫–∞:** –ê–¥–º–∏–Ω —Å–ø–∞–º–∏—Ç –∫–Ω–æ–ø–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
**–ó–∞—â–∏—Ç–∞:** 
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö (–≤—ã–¥–∞—á–∞ –∫–ª—é—á–∞, –∑–∞–ø—É—Å–∫ —Å—Ç–∏—Ä–∫–∏)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å rate limiting (TODO)

### 5. –£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
**–ê—Ç–∞–∫–∞:** –ü–æ–ø—ã—Ç–∫–∞ –≤—ã—á–∏—Ç–∞—Ç—å `telegram_chat_id` —á–µ—Ä–µ–∑ timing attack.
**–ó–∞—â–∏—Ç–∞:** 
- –ö–ª–∏–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `telegram_chat_id`
- API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `telegram_chat_id` –≤ –æ—Ç–≤–µ—Ç–µ
- `service_role` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [x] JWT —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [x] –ü—Ä–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –ë–î –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
- [x] `service_role` –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Vercel env vars)
- [x] `TELEGRAM_BOT_TOKEN` —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [x] –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [x] –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö –≤ –æ—á–µ—Ä–µ–¥–∏
- [x] –ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ –∞–¥–º–∏–Ω—ã –Ω–µ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] API –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞

---

## üîÑ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Vercel Environment Variables (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```
SUPABASE_SERVICE_ROLE_KEY=<service_role_key>
TELEGRAM_BOT_TOKEN=<bot_token_from_BotFather>
TELEGRAM_ADMIN_CHAT_ID=<optional_main_admin_chat_id>
```

### .env.local (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
```
SUPABASE_SERVICE_ROLE_KEY=<service_role_key>
TELEGRAM_BOT_TOKEN=<bot_token_from_BotFather>
TELEGRAM_ADMIN_CHAT_ID=<optional_main_admin_chat_id>
```

‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å .env.local –≤ Git!**

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ö–ª–∏–µ–Ω—Ç        ‚îÇ
‚îÇ  (–±—Ä–∞—É–∑–µ—Ä)      ‚îÇ
‚îÇ                 ‚îÇ
‚îÇ  - –ö–Ω–æ–ø–∫–∞       ‚îÇ
‚îÇ  - JWT —Ç–æ–∫–µ–Ω    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ POST /api/telegram/notify
         ‚îÇ Authorization: Bearer <jwt>
         ‚îÇ Body: { type, student_id, ... }
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   API Route                         ‚îÇ
‚îÇ   /api/telegram/notify              ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JWT —Ç–æ–∫–µ–Ω             ‚îÇ
‚îÇ  2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å is_admin –≤ –ë–î         ‚îÇ
‚îÇ  3. –ü–æ–ª—É—á–∏—Ç—å telegram_chat_id       ‚îÇ
‚îÇ     (—á–µ—Ä–µ–∑ service_role)            ‚îÇ
‚îÇ  4. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ          ‚îÇ
‚îÇ  5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram API        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram API   ‚îÇ
‚îÇ                 ‚îÇ
‚îÇ  - –û—Ç–ø—Ä–∞–≤–∫–∞     ‚îÇ
‚îÇ    —Å–æ–æ–±—â–µ–Ω–∏–π    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ:** –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º –∏ –∞–¥–º–∏–Ω–∞–º
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:** –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö
‚úÖ **–ó–∞—â–∏—â–µ–Ω–æ:** `service_role` –∏ `TELEGRAM_BOT_TOKEN` —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚úÖ **–õ–æ–≥–∏—Ä—É–µ—Ç—Å—è:** –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ª–æ–≥–∏

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/app/api/telegram/notify/route.ts` - API route —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π JWT
- `src/lib/telegram.ts` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ç–æ–∫–µ–Ω–∞
- `src/lib/supabase-admin.ts` - admin –∫–ª–∏–µ–Ω—Ç —Å service_role
- `TELEGRAM_BOT_UPDATE.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞
- `CHECK_TELEGRAM.md` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
