# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## 1. Vercel Environment Variables

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:

```
TELEGRAM_WEBHOOK_SECRET=laundry_webhook_secret_key_2025
```

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:**
1. –û—Ç–∫—Ä—ã—Ç—å [Vercel Dashboard](https://vercel.com/dashboard)
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç `laundry-app`
3. Settings ‚Üí Environment Variables
4. Add New Variable:
   - Name: `TELEGRAM_WEBHOOK_SECRET`
   - Value: `laundry_webhook_secret_key_2025`
   - Environment: Production, Preview, Development (–≤—Å–µ)
5. Save

## 2. Redeploy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Deployments
2. –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ù–∞–∂–∞—Ç—å "..." ‚Üí Redeploy
4. –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π push –≤ main (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

## 3. –û–±–Ω–æ–≤–∏—Ç—å Telegram –±–æ—Ç–∞

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `TELEGRAM_BOT_UPDATE.md`

**–ö—Ä–∞—Ç–∫–æ:**
1. –î–æ–±–∞–≤–∏—Ç—å –≤ .env –±–æ—Ç–∞:
   ```
   TELEGRAM_WEBHOOK_SECRET=laundry_webhook_secret_key_2025
   ```

2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –±–æ—Ç–∞:
   ```python
   response = requests.post(
       f"{BASE_URL}/api/telegram/link",
       headers={
           "X-Telegram-Secret": os.getenv("TELEGRAM_WEBHOOK_SECRET")
       },
       json={"student_id": student_id, "telegram_chat_id": str(chat_id)}
   )
   ```

3. Redeploy –±–æ—Ç–∞ (Render/Railway/etc)

## 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. ‚úÖ –ó–∞–π—Ç–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. ‚úÖ –ù–∞–∂–∞—Ç—å "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram"
4. ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start YOUR_STUDENT_ID` –≤ –±–æ—Ç
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–í Vercel Functions Logs –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üîî Telegram link request: { student_id: '...', telegram_chat_id: '...' }
üë§ Current student data: { ... }
‚úÖ Telegram linked successfully: { ... }
```

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 1:** –°—Ç–∞—Ç—É—Å Telegram –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ª–æ–≤–∏–µ –≤ realtime –ø–æ–¥–ø–∏—Å–∫–µ LaundryContext.tsx

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ 2:** API endpoint –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª anon key –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª—Å—è RLS
- –ü–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ service_role key
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env.local` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git)
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ Vercel Environment Variables
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –±–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è dev –∏ production (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
